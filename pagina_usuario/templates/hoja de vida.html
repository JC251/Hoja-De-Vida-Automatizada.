{% extends 'base.html' %}
{% block content %}
<style>
    :root {
        --cv-bg: #0f172a;
        --cv-card: #1e293b;
        --cv-accent: #38bdf8;
    }
    body { background-color: var(--cv-bg); }
    .cv-wrapper {
        max-width: 1100px;
        margin: 40px auto;
        background: var(--cv-card);
        box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        border-radius: 20px;
        overflow: hidden;
        display: flex;
        flex-wrap: wrap;
        border: 1px solid #334155;
    }
    .cv-sidebar {
        flex: 1;
        min-width: 320px;
        background: #111827;
        color: #f1f5f9;
        padding: 40px;
        border-right: 1px solid #334155;
    }
    .cv-profile-img {
        width: 180px; height: 180px;
        border-radius: 50%;
        border: 4px solid var(--cv-accent);
        object-fit: cover;
        margin: 0 auto 25px;
        display: block;
    }
    .cv-main { flex: 2; padding: 50px; color: #e2e8f0; }
    h2 { color: var(--cv-accent); font-size: 1.4rem; font-weight: 700; margin-bottom: 20px; border-bottom: 1px solid #334155; padding-bottom: 10px; }
    .project-card { background: #0f172a; padding: 15px; border-radius: 10px; margin-bottom: 15px; border-left: 3px solid var(--cv-accent); }
</style>

<div class="cv-wrapper">
    <aside class="cv-sidebar">
        <img src="{{ perfil.foto.url }}" class="cv-profile-img" alt="Foto de perfil">
        <h3 class="text-center fw-bold mb-1">{{ perfil.nombres }} {{ perfil.apellidos }}</h3>
        <p class="text-center text-info small mb-4">Perfil Verificado</p>
        
        <div class="mb-4">
            <h6 class="text-uppercase small fw-bold text-secondary">Contacto</h6>
            <p class="small mb-1"><i class="bi bi-envelope me-2"></i>{{ user.email }}</p>
        </div>

        <div class="mb-4">
            <h6 class="text-uppercase small fw-bold text-secondary">Habilidades Técnicas</h6>
            <div class="d-flex flex-wrap gap-2 mt-2">
                {% for skill in perfil.habilidades.all %}
                    <span class="badge bg-secondary rounded-pill fw-normal">{{ skill.nombre_habilidad }}</span>
                {% endfor %}
            </div>
        </div>
    </aside>

    <main class="cv-main">
        <section class="mb-5">
            <h2>Sobre mí</h2>
            <p class="text-secondary">{{ perfil.perfil_profesional }}</p>
        </section>

        <section class="mb-5">
            <h2>Trayectoria Laboral</h2>
            {% for exp in perfil.experiencia_lab.all %}
                <div class="mb-3">
                    <h6 class="fw-bold mb-0 text-white">{{ exp.cargo }}</h6>
                    <p class="text-info small mb-0">{{ exp.nombre_empresa }}</p>
                </div>
            {% empty %}
                <p class="text-muted small">No se han registrado experiencias laborales.</p>
            {% endfor %}
        </section>

        <section>
            <h2>Proyectos y Logros</h2>
            <div class="row">
                <div class="col-md-12">
                    {% for prod in perfil.productos_lab.all %}
                        <div class="project-card">
                            <h6 class="fw-bold mb-1 text-white">{{ prod.nombre_producto }}</h6>
                            <p class="small text-secondary mb-0">{{ prod.descripcion }}</p>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </section>
    </main>
</div>
{% endblock %}